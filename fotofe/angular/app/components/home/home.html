<div class="l-content">
    <div class="intro-block" ng-controller="homeSearch" ng-style="{'background-image':'url('+imgURL+')'}" ng-class="{active : searchActive}">
        <div class="l-container">
            <div class="l-content__main l-view--reader home-search"
                ng-class="{active : searchActive, loading : isLoading}">
                <div class="l-content__header hero">
                    <h1 class="hero--headline">{{spr.home_headline}}</h1>

                    <div class="hero--subheadline">{{spr.home_subheadline}}</div>
                </div>
                <div class="l-content__section power-search power-search--home">
                    <form class="form-container powersearch" novalidate>
                        <label for="powersearch" >{{ spr.search_all }}</label>
                        <div class="loading-indicator"></div>
                        <span class="s-icon"></span>
                        <!-- fake fields are a workaround for chrome autofill getting the wrong fields -->
                        <input type="text" id="powersearch"
                               name="powersearch"
                               class="power-search__input"
                               ng-focus="focus()"
                               ng-blur="blur()"
                               ng-model="user.query"
                               ng-change="change(user)"
                               ng-readonly="!searchActive"
                               autocomplete="off">
                    </form>
                </div>
                <div class="results" ng-if="result.photographer_count > 0 || result.stock_count > 0">
                    <div class="textual">
                        <div class="result-set photographer" ng-if="result.photographer_count > 0">
                            <h5>{{spr.photographers}}</h5>
                            <ul>
                                <li ng-repeat="photographer in result.photographer_results | limitTo: limit">
                                    <a ui-sref="photographerDetail( {id: '{{photographer.id}}'} )">
                                    {{photographer.nachname}} {{photographer.vorname}} {{photographer.namenszusatz}}
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <div class="result-set stocks" ng-if="result.stock_count > 0">
                            <h5>{{spr.bestaende2}}</h5>
                            <ul>
                                <li ng-repeat="stock in result.stock_results | limitTo: limit">
                                    <a ui-sref="inventoryDetail( {id: '{{stock.id}}'} )">
                                    {{stock.name}}
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <div class="result-set institution" ng-if="result.institution_count > 0">
                            <h5>{{spr.institution}}</h5>
                            <ul>
                                <li ng-repeat="institution in result.institution_results | limitTo: limit">
                                    <a ui-sref="institutionDetail( {id: '{{institution.id}}'} )" ng-if="institution.name">
                                    {{institution.name}}
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <div class="result-set exhibition" ng-if="result.exhibition_count > 0">
                            <h5>{{spr.ausstellung}}</h5>
                            <ul>
                                <li ng-repeat="exhibition in result.exhibition_results | limitTo: limit">
                                    <a ui-sref="exhibitionDetail( {id: '{{exhibition.id}}'} )">
                                    {{exhibition.titel}} - {{exhibition.jahr}}, {{exhibition.ort}}
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <div class="result-set literature" ng-if="result.literature_count > 0">
                            <h5>{{spr.literatur}}</h5>
                            <ul>
                                <li ng-repeat="literature in result.literature_results | limitTo: limit">
                                    <a ui-sref="literaturDetail( {id: '{{literature.id}}'} )">
                                    {{literature.titel}} - {{literature.jahr}}, {{literature.ort}}
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="imagery">
                        <ul>
                            <li ng-repeat="photos in result.photos_results | limitTo: photolimit">
                                <a ui-sref="photoDetail( {id: '{{photos.id}}'} )">
                                    <img src="{{ imageRootUrl }}{{photos.image_path}}" width="100%" />
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="photographer-teaser">
        <div class="l-container">
            <h2>{{spr.fotographInnen}}</h2>
            <uib-tabset active="active">
                <uib-tab index="1" heading="{{spr.latest_changed}}">
                    <div class="flex">
                      <div class="photographer-block" ng-repeat="p in recent_photographer">
                        <h4>
                            <a ui-sref="photographerDetail( {id: '{{p.id}}'} )">{{p.nachname}}, {{p.vorname}}</a>
                            <span ng-if="p.geschlecht" ng-class="getGenderClass(p.geschlecht)"></span>
                        </h4>
                        <small ng-bind-html="p.fgeburtsdatum"></small>
                        <small ng-bind-html="p.fldatum"></small><br />
                        <small ng-bind-html="p.arbeitsperioden"></small>
                        <p ng-bind-html="p.bildgattungen"></p>
                        <p ng-bind-html="p.fotografengattungen"></p>
                      </div>
                    </div>
                </uib-tab>
                <uib-tab index="2" heading="{{spr.most_viewed}}">
                  <div class="flex">
                      <div class="photographer-block" ng-repeat="p in mostviewed_photographer">
                        <h4>
                            <a ui-sref="photographerDetail( {id: '{{p.id}}'} )">{{p.nachname}}, {{p.vorname}}</a>
                            <span ng-if="p.geschlecht" ng-class="getGenderClass(p.geschlecht)"></span>
                        </h4>
                        <small ng-bind-html="p.fgeburtsdatum"></small>
                        <small ng-bind-html="p.fldatum"></small><br />
                        <small ng-bind-html="p.arbeitsperioden"></small>
                        <p ng-bind-html="p.bildgattungen"></p>
                        <p ng-bind-html="p.fotografengattungen"></p>
                      </div>
                    </div>
                </uib-tab>
            </uib-tabset>
        </div>
    </div>


    <div class="big-numbers">
        <div class="l-container">
            <div class="flex">
                <count-up-number number="{{statistics.photographer.count}}" title="{{spr.fotographInnen}}"></count-up-number>
                <count-up-number number="{{statistics.institution.count}}" title="{{spr.institutionen}}"></count-up-number>
                <count-up-number number="{{statistics.photos.count}}" title="{{spr.photos}}"></count-up-number>
                <count-up-number number="{{statistics.literature.count}}" title="{{spr.literatur}}"></count-up-number>
            </div>
        </div>
    </div>

    <photo-grid type="random" amount="20"></photo-grid>
</div>
